<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Notes for developers · Easy access to FITS files in Julia</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Easy access to FITS files in Julia</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../files/">Access to FITS files</a></li><li><a class="tocitem" href="../hdus/">-</a></li><li><a class="tocitem" href="../headers/">-</a></li><li><a class="tocitem" href="../images/">FITS image extensions</a></li><li><a class="tocitem" href="../tables/">FITS Table extensions</a></li><li><a class="tocitem" href="../install/">-</a></li><li><a class="tocitem" href="../grammar/">The <em>Grammar</em> of <code>EasyFITS</code></a></li><li><a class="tocitem" href="../library/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Notes for developers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Notes for developers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/emmt/EasyFITS.jl/blob/master/docs/src/devel.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Notes-for-developers"><a class="docs-heading-anchor" href="#Notes-for-developers">Notes for developers</a><a id="Notes-for-developers-1"></a><a class="docs-heading-anchor-permalink" href="#Notes-for-developers" title="Permalink"></a></h1><h2 id="The-FITS-standard"><a class="docs-heading-anchor" href="#The-FITS-standard">The FITS standard</a><a id="The-FITS-standard-1"></a><a class="docs-heading-anchor-permalink" href="#The-FITS-standard" title="Permalink"></a></h2><p>The FITS format is described in the <a href="https://fits.gsfc.nasa.gov/fits_standard.html"><em>FITS Standard Document</em></a>.</p><h2 id="The-CFITSIO-sub-module"><a class="docs-heading-anchor" href="#The-CFITSIO-sub-module">The <code>CFITSIO</code> sub-module</a><a id="The-CFITSIO-sub-module-1"></a><a class="docs-heading-anchor-permalink" href="#The-CFITSIO-sub-module" title="Permalink"></a></h2><p><code>EasyFITS</code> makes use of the <a href="https://github.com/JuliaInterop/Clang.jl"><code>Clang</code></a> Julia package to automatically build file <code>deps/deps.jl</code> with constants, types, and low level functions to call the functions of the CFITSIO library with arguments of the correct type. All these are available in the <code>EasyFITS.CFITSIO</code> sub-module.</p><h2 id="Calls-to-functions-in-the-CFITSIO-library"><a class="docs-heading-anchor" href="#Calls-to-functions-in-the-CFITSIO-library">Calls to functions in the CFITSIO library</a><a id="Calls-to-functions-in-the-CFITSIO-library-1"></a><a class="docs-heading-anchor-permalink" href="#Calls-to-functions-in-the-CFITSIO-library" title="Permalink"></a></h2><p>When calling functions of the CFITSIO library, there are several things to take care of:</p><ul><li><p>Passing correct arguments. This is partially ensured by the type assertions in the <code>@ccall</code> macro. It is also necessary to check whether a pointer to some opaque structure in the library is valid.</p></li><li><p>Preserving objects from being destroyed while being in use. Of course, this is automatically done by Julia for Julia objects, but must be handled for references or pointers to objects provided by the CFITSIO library.</p></li></ul><p>When an object <code>obj</code> is specified for an argument of type <code>Ptr{T}</code> to be passed to a C function, Julia <code>ccall</code> does something like:</p><pre><code class="language-julia hljs">ref = Base.cconvert(Ptr{T}, obj)
ptr = Base.unsafe_convert(Ptr{T}, ref)
result = GC.@preserve ref call_some_c_function(..., ptr, ...)</code></pre><p>Here <code>ref</code> is an object (by default, <code>Base.cconvert(Ptr{T},obj)</code> yields <code>obj</code> itself) to be used with <code>Base.unsafe_convert(Ptr{T},ref)</code> to get the pointer and to be preserved from being garbage collected in order to warrant that the pointer remains valid.</p><p>Thanks to this mechanism, it is quite simple to ensure that valid pointers to opaque structures of the CFITSIO library be passed a function of this library. For example, the code below is how is handled a pointer to a <code>fitsfile</code> C structure in our code:</p><pre><code class="language-julia hljs">isnull(ptr::Ptr{T}) where {T} = ptr === Ptr{T}(0)
check(ptr::Ptr) = isnull(ptr) ? error(&quot;invalid NULL pointer&quot;) : ptr
get_handle(file::FitsFile) = getfield(obj, :handle)
get_file(hdu::AbstractHDU) = getfield(hdu, :file)
Base.unsafe_convert(Ptr{CFITSIO.fitsfile}, obj::FitsFile) = check(get_handle(obj))
Base.cconvert(Ptr{CFITSIO.fitsfile}, hdu::AbstractHDU) = get_file(hdu)</code></pre><p>Private methods <code>isnull</code> and <code>check</code> are introduced for readability. Private methods <code>get_handle</code> and <code>get_file</code> are two of the private accessors introduced to hide the fields of a FITS file object and let some other <em>public</em> properties be implemented. The former yields the pointer to the <code>fitsfile</code> C structure that is managed by a <code>FitsFile</code> object, while the latter yields the <code>FitsFile</code> object storing the HDU as it is the one that must be used and preserved when calling a C function requiring a pointer to a <code>fitsfile</code> C structure.</p><p>Note that <code>FitsFile</code> objects have a finalizer that automatically releases resources such as the associated <code>fitsfile</code> C structure when the object is garbage collected.</p><h2 id="Helper-functions"><a class="docs-heading-anchor" href="#Helper-functions">Helper functions</a><a id="Helper-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Helper-functions" title="Permalink"></a></h2><p>The following non-exported functions are provided for meta-programming and for dealing with the types of arguments in calls to the functions of the CFITSIO library.</p><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.cfunc" href="#EasyFITS.cfunc"><code>EasyFITS.cfunc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.cfunc(pfx::Union{AbstractString,Symbol}, T::Type) -&gt; sym</code></pre><p>yields the symbolic name of the function in the CFITSIO library whose prefix is <code>pfx</code> and whose suffix is deduced from the type <code>T</code>. Long/short function names are supported and automatically detected depending on whether <code>pfx</code> ends with an underscore character.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L355-L363">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.ctype" href="#EasyFITS.ctype"><code>EasyFITS.ctype</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.ctype(T) -&gt; T′</code></pre><p>yields the C type equivalent to <code>T</code> in CFITSIO library. This is mostly for Booleans which are treated as C <code>char</code> in the library, the other basic numerical types being unchanged. An error is thrown if the returned type has a different size than that of <code>T</code>. This is to make sure that Julia arrays with elements of type <code>T</code> can safely be used to store values of type <code>T′</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This only applies to element type of arrays. For boolean scalars, a <code>Cint</code> is the correct type.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L368-L381">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.cpointer" href="#EasyFITS.cpointer"><code>EasyFITS.cpointer</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.cpointer(arr::AbstractArray) -&gt; ptr::Ptr{ctype(eltype(arr))}</code></pre><p>yields a pointer to the elements of array <code>arr</code> that can be used in calls to functions of the CFITSIO library. Compared to <code>Ptr{Cvoid}(pointer(arr))</code>, this function yields a typed pointer which prevents using arguments of the wrong type.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Do not forget to use <code>GC.@protect arr ...</code> to avoid <code>arr</code> being garbage collected while its address is in use.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L395-L407">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>EasyFITS.get_field_name</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Pixel-types"><a class="docs-heading-anchor" href="#Pixel-types">Pixel types</a><a id="Pixel-types-1"></a><a class="docs-heading-anchor-permalink" href="#Pixel-types" title="Permalink"></a></h2><p>The following table lists conventions used by <code>CFITSIO</code> for pixel types, that is the <code>BITPIX</code> keyword in FITS image extensions.</p><table><tr><th style="text-align: left">Type Code</th><th style="text-align: left">Julia Type</th><th style="text-align: right"><code>BITPIX</code></th></tr><tr><td style="text-align: left"><code>BYTE_IMG</code></td><td style="text-align: left"><code>UInt8</code></td><td style="text-align: right">8</td></tr><tr><td style="text-align: left"><code>SBYTE_IMG</code></td><td style="text-align: left"><code>Int8</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>SHORT_IMG</code></td><td style="text-align: left"><code>Int16</code></td><td style="text-align: right">16</td></tr><tr><td style="text-align: left"><code>USHORT_IMG</code></td><td style="text-align: left"><code>UInt16</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>LONG_IMG</code></td><td style="text-align: left"><code>Int32</code></td><td style="text-align: right">32</td></tr><tr><td style="text-align: left"><code>ULONG_IMG</code></td><td style="text-align: left"><code>UInt32</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>LONGLONG_IMG</code></td><td style="text-align: left"><code>Int64</code></td><td style="text-align: right">64</td></tr><tr><td style="text-align: left"><code>ULONGLONG_IMG</code></td><td style="text-align: left"><code>UInt64</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>FLOAT_IMG</code></td><td style="text-align: left"><code>Float32</code></td><td style="text-align: right">-32</td></tr><tr><td style="text-align: left"><code>DOUBLE_IMG</code></td><td style="text-align: left"><code>Float64</code></td><td style="text-align: right">-64</td></tr></table><p>Types without a value in the <code>BITPIX</code> column are converted by the CFITSIO library into the other signed/unsigned type using special values of the <code>BSCALE</code> and <code>BZERO</code> keywords to allow for the reciprocal conversion. This is explicitly allowed by the FITS Standard (version 4.0).</p><p>The above equivalence rules are implemented by the following two non-exported functions.</p><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.type_to_bitpix" href="#EasyFITS.type_to_bitpix"><code>EasyFITS.type_to_bitpix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.type_to_bitpix(T)</code></pre><p>yields the code for FITS image pixels of type <code>T</code>. Argument can also be an array instance or type.</p><p>Basic numeric types are recognized by this method which may be extended by other packages to yield the CFITSIO codes equivalent to their own types. The CFITSIO constants (to be prefixed by <code>EasyFITS.CFITSIO.</code>) and their corresponding Julia types and standard BITPIX code are:</p><table><tr><th style="text-align: left">CFITSIO Constant</th><th style="text-align: left">Julia Type</th><th style="text-align: right"><code>BITPIX</code></th></tr><tr><td style="text-align: left"><code>BYTE_IMG</code></td><td style="text-align: left"><code>UInt8</code></td><td style="text-align: right">8</td></tr><tr><td style="text-align: left"><code>SBYTE_IMG</code></td><td style="text-align: left"><code>Int8</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>SHORT_IMG</code></td><td style="text-align: left"><code>Int16</code></td><td style="text-align: right">16</td></tr><tr><td style="text-align: left"><code>USHORT_IMG</code></td><td style="text-align: left"><code>UInt16</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>LONG_IMG</code></td><td style="text-align: left"><code>Int32</code></td><td style="text-align: right">32</td></tr><tr><td style="text-align: left"><code>ULONG_IMG</code></td><td style="text-align: left"><code>UInt32</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>LONGLONG_IMG</code></td><td style="text-align: left"><code>Int64</code></td><td style="text-align: right">64</td></tr><tr><td style="text-align: left"><code>ULONGLONG_IMG</code></td><td style="text-align: left"><code>UInt64</code></td><td style="text-align: right"></td></tr><tr><td style="text-align: left"><code>FLOAT_IMG</code></td><td style="text-align: left"><code>Float32</code></td><td style="text-align: right">-32</td></tr><tr><td style="text-align: left"><code>DOUBLE_IMG</code></td><td style="text-align: left"><code>Float64</code></td><td style="text-align: right">-64</td></tr></table><p>Note that CFITSIO can read/write non-standard pixel types (those without a <code>BITPIX</code> value above) by setting keywords <code>BSCALE</code> and <code>BZERO</code> with special values as explicitely allowed by the FITS Standard (version 4).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L91-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.type_from_bitpix" href="#EasyFITS.type_from_bitpix"><code>EasyFITS.type_from_bitpix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.type_from_bitpix(b) -&gt; T</code></pre><p>yields the Julia type <code>T</code> corresponding to FITS &quot;BITPIX&quot; <code>b</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L124-L129">source</a></section></article><h2 id="Array-data-types"><a class="docs-heading-anchor" href="#Array-data-types">Array data types</a><a id="Array-data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Array-data-types" title="Permalink"></a></h2><p>The following table lists conventions used by <code>CFITSIO</code> for array element types.</p><table><tr><th style="text-align: left">Type Code</th><th style="text-align: left">C Type</th><th style="text-align: left">Short Suffix</th><th style="text-align: left">Long Suffix</th></tr><tr><td style="text-align: left"><code>TLOGICAL</code></td><td style="text-align: left"><code>char</code></td><td style="text-align: left"><code>l</code></td><td style="text-align: left"><code>_log</code></td></tr><tr><td style="text-align: left"><code>TBYTE</code></td><td style="text-align: left"><code>unsigned char</code></td><td style="text-align: left"><code>b</code></td><td style="text-align: left"><code>_byt</code></td></tr><tr><td style="text-align: left"><code>TSBYTE</code></td><td style="text-align: left"><code>signed char</code></td><td style="text-align: left"><code>sb</code></td><td style="text-align: left"><code>_sbyt</code></td></tr><tr><td style="text-align: left"><code>TUSHORT</code></td><td style="text-align: left"><code>unsigned short</code></td><td style="text-align: left"><code>ui</code></td><td style="text-align: left"><code>_usht</code></td></tr><tr><td style="text-align: left"><code>TSHORT</code></td><td style="text-align: left"><code>short</code></td><td style="text-align: left"><code>i</code></td><td style="text-align: left"><code>_sht</code></td></tr><tr><td style="text-align: left"><code>TUINT</code></td><td style="text-align: left"><code>unsigned int</code></td><td style="text-align: left"><code>uk</code></td><td style="text-align: left"><code>_uint</code></td></tr><tr><td style="text-align: left"><code>TINT</code></td><td style="text-align: left"><code>int</code></td><td style="text-align: left"><code>k</code></td><td style="text-align: left"><code>_int</code></td></tr><tr><td style="text-align: left"><code>TULONG</code></td><td style="text-align: left"><code>unsigned long</code></td><td style="text-align: left"><code>uj</code></td><td style="text-align: left"><code>_ulng</code></td></tr><tr><td style="text-align: left"><code>TLONG</code></td><td style="text-align: left"><code>long</code></td><td style="text-align: left"><code>j</code></td><td style="text-align: left"><code>_lng</code></td></tr><tr><td style="text-align: left"><code>TULONGLONG</code></td><td style="text-align: left"><code>unsigned long long</code></td><td style="text-align: left"><code>ujj</code></td><td style="text-align: left"><code>_ulnglng</code></td></tr><tr><td style="text-align: left"><code>TLONGLONG</code></td><td style="text-align: left"><code>long long</code></td><td style="text-align: left"><code>jj</code></td><td style="text-align: left"><code>_lnglng</code></td></tr><tr><td style="text-align: left"><code>TFLOAT</code></td><td style="text-align: left"><code>float</code></td><td style="text-align: left"><code>e</code></td><td style="text-align: left"><code>_flt</code></td></tr><tr><td style="text-align: left"><code>TDOUBLE</code></td><td style="text-align: left"><code>double</code></td><td style="text-align: left"><code>d</code></td><td style="text-align: left"><code>_dbl</code></td></tr><tr><td style="text-align: left"><code>TCOMPLEX</code></td><td style="text-align: left"><code>float complex</code></td><td style="text-align: left"><code>c</code></td><td style="text-align: left"><code>_cmp</code></td></tr><tr><td style="text-align: left"><code>TDBLCOMPLEX</code></td><td style="text-align: left"><code>double complex</code></td><td style="text-align: left"><code>m</code></td><td style="text-align: left"><code>_dblcmp</code></td></tr><tr><td style="text-align: left"><code>TSTRING</code></td><td style="text-align: left"><code>char*</code></td><td style="text-align: left"><code>s</code></td><td style="text-align: left"><code>_str</code></td></tr><tr><td style="text-align: left"><code>TBIT</code></td><td style="text-align: left"></td><td style="text-align: left"><code>x</code></td><td style="text-align: left"><code>_bit</code></td></tr><tr><td style="text-align: left"></td><td style="text-align: left"></td><td style="text-align: left"><code>u</code></td><td style="text-align: left"><code>_null</code></td></tr></table><p>Complex types <code>float complex</code> and <code>double complex</code> are stored are pairs of single/double precision floating-point values (this is not guaranteed by C99 standard so strict equivalence does not hold here).</p><p>The above equivalence rules are implemented by the following two non-exported functions.</p><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.type_to_code" href="#EasyFITS.type_to_code"><code>EasyFITS.type_to_code</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.type_to_code(T)</code></pre><p>yields the CFITSIO type code for a keyword value or table cells of type <code>T</code>. Argument can also be an array instance or type.</p><p>Basic numeric types and string types are recognized by this method which may be extended by other packages to yield the CFITSIO codes equivalent to their own types. The CFITSIO type constants (to be prefixed by <code>EasyFITS.CFITSIO.</code>) and their corresponding C and Julia types are:</p><table><tr><th style="text-align: left">CFITSIO Constant</th><th style="text-align: left">C Types</th><th style="text-align: left">Julia Types</th></tr><tr><td style="text-align: left"><code>TLOGICAL</code></td><td style="text-align: left"><code>char</code></td><td style="text-align: left"><code>Cchar</code>, <code>Bool</code></td></tr><tr><td style="text-align: left"><code>TBYTE</code></td><td style="text-align: left"><code>unsigned char</code></td><td style="text-align: left"><code>UInt8</code>, <code>Bool</code></td></tr><tr><td style="text-align: left"><code>TSBYTE</code></td><td style="text-align: left"><code>signed char</code></td><td style="text-align: left"><code>Int8</code></td></tr><tr><td style="text-align: left"><code>TUSHORT</code></td><td style="text-align: left"><code>unsigned short</code></td><td style="text-align: left"><code>Cushort</code></td></tr><tr><td style="text-align: left"><code>TSHORT</code></td><td style="text-align: left"><code>short</code></td><td style="text-align: left"><code>Cshort</code></td></tr><tr><td style="text-align: left"><code>TUINT</code></td><td style="text-align: left"><code>unsigned int</code></td><td style="text-align: left"><code>Cuint</code></td></tr><tr><td style="text-align: left"><code>TINT</code></td><td style="text-align: left"><code>int</code></td><td style="text-align: left"><code>Cint</code></td></tr><tr><td style="text-align: left"><code>TULONG</code></td><td style="text-align: left"><code>unsigned long</code></td><td style="text-align: left"><code>Culong</code></td></tr><tr><td style="text-align: left"><code>TLONG</code></td><td style="text-align: left"><code>long</code></td><td style="text-align: left"><code>Clong</code></td></tr><tr><td style="text-align: left"><code>TULONGLONG</code></td><td style="text-align: left"><code>unsigned long long</code></td><td style="text-align: left"><code>Culonglong</code></td></tr><tr><td style="text-align: left"><code>TLONGLONG</code></td><td style="text-align: left"><code>long long</code></td><td style="text-align: left"><code>Clonglong</code></td></tr><tr><td style="text-align: left"><code>TFLOAT</code></td><td style="text-align: left"><code>float</code></td><td style="text-align: left"><code>Cfloat</code></td></tr><tr><td style="text-align: left"><code>TDOUBLE</code></td><td style="text-align: left"><code>double</code></td><td style="text-align: left"><code>Cdouble</code></td></tr><tr><td style="text-align: left"><code>TCOMPLEX</code></td><td style="text-align: left"><code>float complex</code></td><td style="text-align: left"><code>Complex{Cfloat}</code></td></tr><tr><td style="text-align: left"><code>TDBLCOMPLEX</code></td><td style="text-align: left"><code>double complex</code></td><td style="text-align: left"><code>Complex{Cdouble}</code></td></tr><tr><td style="text-align: left"><code>TSTRING</code></td><td style="text-align: left"><code>char*</code></td><td style="text-align: left"></td></tr><tr><td style="text-align: left"><code>TBIT</code></td><td style="text-align: left"></td><td style="text-align: left"></td></tr></table></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L150-L181">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.type_from_code" href="#EasyFITS.type_from_code"><code>EasyFITS.type_from_code</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.type_from_code(c) -&gt; T</code></pre><p>yields the Julia type <code>T</code> corresponding to CFITSIO type code <code>c</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L201-L206">source</a></section></article><h2 id="Column-data-types"><a class="docs-heading-anchor" href="#Column-data-types">Column data types</a><a id="Column-data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Column-data-types" title="Permalink"></a></h2><p>The following table lists the correspondences between the <code>TFORMn</code> letter in FITS table extensions and the column data type.</p><table><tr><th style="text-align: left">Type Code</th><th style="text-align: left">Julia Type</th><th style="text-align: left"><code>TFORM</code></th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>TLOGICAL</code></td><td style="text-align: left"><code>Bool</code></td><td style="text-align: left"><code>’L’</code></td><td style="text-align: left">Logical (1 byte)</td></tr><tr><td style="text-align: left"><code>TBIT</code></td><td style="text-align: left"></td><td style="text-align: left"><code>’X’</code></td><td style="text-align: left">Bit (special)</td></tr><tr><td style="text-align: left"><code>TBYTE</code></td><td style="text-align: left"><code>UInt8</code></td><td style="text-align: left"><code>’B’</code></td><td style="text-align: left">8-bit unsigned integer</td></tr><tr><td style="text-align: left"><code>TSHORT</code></td><td style="text-align: left"><code>Int16</code></td><td style="text-align: left"><code>’I’</code></td><td style="text-align: left">16-bit signed integer</td></tr><tr><td style="text-align: left"><code>TLONG</code></td><td style="text-align: left"><code>Int32</code></td><td style="text-align: left"><code>’J’</code></td><td style="text-align: left">32-bit signed integer</td></tr><tr><td style="text-align: left"><code>TLONGLONG</code></td><td style="text-align: left"><code>Int64</code></td><td style="text-align: left"><code>’K’</code></td><td style="text-align: left">64-bit signed integer</td></tr><tr><td style="text-align: left"><code>TSTRING</code></td><td style="text-align: left"><code>String</code></td><td style="text-align: left"><code>’A’</code></td><td style="text-align: left">Character (1 byte, used for strings)</td></tr><tr><td style="text-align: left"><code>TFLOAT</code></td><td style="text-align: left"><code>Float32</code></td><td style="text-align: left"><code>’E’</code></td><td style="text-align: left">32-bit floating point</td></tr><tr><td style="text-align: left"><code>TDOUBLE</code></td><td style="text-align: left"><code>Float64</code></td><td style="text-align: left"><code>’D’</code></td><td style="text-align: left">64-bit floating point</td></tr><tr><td style="text-align: left"><code>TCOMPLEX</code></td><td style="text-align: left"><code>ComplexF32</code></td><td style="text-align: left"><code>’C’</code></td><td style="text-align: left">64-bit complex</td></tr><tr><td style="text-align: left"><code>TDBLCOMPLEX</code></td><td style="text-align: left"><code>ComplexF64</code></td><td style="text-align: left"><code>’M’</code></td><td style="text-align: left">128-bit complex</td></tr><tr><td style="text-align: left"></td><td style="text-align: left"></td><td style="text-align: left"><code>’P’</code></td><td style="text-align: left">32-bit array descriptor</td></tr><tr><td style="text-align: left"></td><td style="text-align: left"></td><td style="text-align: left"><code>’Q’</code></td><td style="text-align: left">64-bit array descriptor</td></tr></table><p>A few non-standard <code>TFORM</code> letters are allowed by CFITSIO. These are converted by the library into other types using <code>TSCALE</code> and <code>TZERO</code> keywords to allow for the reciprocal conversion following the same principles as for the <code>BITPIX</code> code and the <code>BSCALE</code> and <code>BZERO</code> keywords.</p><table><tr><th style="text-align: left">Type Code</th><th style="text-align: left">Julia Type</th><th style="text-align: left"><code>TFORM</code></th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left"><code>TSBYTE</code></td><td style="text-align: left"><code>Int8</code></td><td style="text-align: left"><code>’S’</code></td><td style="text-align: left">8-bit signed integer</td></tr><tr><td style="text-align: left"><code>TUSHORT</code></td><td style="text-align: left"><code>UInt16</code></td><td style="text-align: left"><code>’U’</code></td><td style="text-align: left">16-bit unsigned integer</td></tr><tr><td style="text-align: left"><code>TULONG</code></td><td style="text-align: left"><code>UInt32</code></td><td style="text-align: left"><code>’V’</code></td><td style="text-align: left">32-bit unsigned integer</td></tr><tr><td style="text-align: left"><code>TULONGLONG</code></td><td style="text-align: left"><code>UInt64</code></td><td style="text-align: left"><code>’W’</code></td><td style="text-align: left">64-bit unsigned integer</td></tr></table><p>The <em>Type Code</em> column indicates the code used by CFITSIO (it is not always consistent with the C types as defined in the above table, so my guess is that this code is only used to keep track of the column data type internally).</p><p>The above equivalence rules are implemented by the following two non-exported functions.</p><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.type_to_letter" href="#EasyFITS.type_to_letter"><code>EasyFITS.type_to_letter</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.type_to_letter(T)</code></pre><p>yields the letter of the <code>TFORMn</code> keyword representing table cells of type <code>T</code> in FITS. Argument can also be an array instance or type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L261-L267">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EasyFITS.type_from_letter" href="#EasyFITS.type_from_letter"><code>EasyFITS.type_from_letter</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EasyFITS.type_from_letter(c) -&gt; T</code></pre><p>yields the Julia type <code>T</code> corresponding to CFITSIO column type letter <code>c</code> as assumed for the <code>TFORMn</code> keywords.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/emmt/EasyFITS.jl/blob/2d8d1b434e9ef3a27b90bfbfbc9b6890cd6746f7/src/utils.jl#L271-L277">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 4 April 2023 21:53">Tuesday 4 April 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
